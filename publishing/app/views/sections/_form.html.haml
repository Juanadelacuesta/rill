= form_for([@chapter, @section], html: {class: "form-horizontal", role: "form"}) do |f|
  - if @section.errors.any?
    %div.error_explanation
      %h2= "#{ pluralize(@section.errors.count, "error") } prohibited this section from being saved:"
      %ul
        - @section.errors.full_messages.each do |message|
          %li= message

  %div.form-group
    = f.label :title, class: "col-sm-2 control-label"
    %div.col-sm-10
      = f.text_field :title, size: 20, class: "form-control", tabindex: 1

  %div.form-group
    = f.label :meijerink_criteria_hash, class: "col-sm-2 control-label"
    %div.col-sm-10
      = f.fields_for :meijerink_criteria_hash, @section.meijerink_criteria do |m|
        - %w(1F 2F 3F).each do |c|
          %label= "#{c}"
          = m.check_box c, checked: @section.meijerink_criteria.include?(c)
          %br


  %div.form-group
    = f.label :description, class: "col-sm-2 control-label"
    %div.col-sm-10
      = f.text_area :description, cols: 20, rows: 4, class: "form-control auto-resize rich-text", tabindex: 4

  - if @section.id
    %div.form-group
      %div.col-sm-offset-2.col-sm-10
        = link_to 'cancel', chapter_section_path(@chapter, @section), class: "btn btn-default", tabindex: 3
        = submit_tag('update', class: "btn btn-primary", tabindex: 2)
  - else
    %div.form-group
      %div.col-sm-offset-2.col-sm-10
        = link_to 'cancel', chapter_path(@chapter), class: "btn btn-default", tabindex: 3
        = submit_tag('save', class: "btn btn-primary", tabindex: 2)
