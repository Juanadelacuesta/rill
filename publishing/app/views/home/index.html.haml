-if Course.current
  - @course = Course.current
  %div.container
    %div.row
      %div.col-md-8.col-md-offset-2
        %h1
          = @course.name
      %div.col-md-2
        = link_to 'Publish', publish_course_path, class: "btn btn-success", method: :post
    %div.row{style: "margin-top:20px;"}
      %div.col-md-8.col-md-offset-2
        %h2
          = link_to 'Entry test questions', questions_path
          %small= "(#{ @course.questions.length } questions)"
        %table.table.table-bordered
          %thead
            %tr
              %th.col-md-10 Title
          %tbody
            - @course.questions.each do |question|
              %tr{class: question.active? ? "success" : "danger"}
                %td= link_to question.to_s.truncate(90, omission: '...'), edit_question_path(question)
    %div.row{style: "margin-top:20px;"}
      %div.col-md-8.col-md-offset-2
        %h2
          = link_to 'Chapters', chapters_path
          %small= "(#{ @course.chapters.length } chapters)"
        - @course.chapters.each do |chapter|
          %h3= link_to chapter.title, chapter
          %table.table.table-condensed.table-bordered
            %thead
              %tr
                %th
                  Section
                  %span.pull-right
                    = "#{chapter.sections.where(active: true).length} / #{chapter.sections.length} published"
                %th
                  %span.pull-right # subsections
                %th
                  %span.pull-right # questions
            %tbody
              - chapter.sections.each do |section|
                %tr{class: section.active? ? "success" : "danger", id: "section-row"}
                  %td
                    = link_to section.title, [chapter, section]
                  %td
                    %span.label.label-primary.pull-right
                      = "#{section.subsections.length}"
                  %td
                    %span.label.label-success.pull-right= section.questions.length
      %div.col-md-2
        %strong Guide:
        %table.table.table-condensed.table-bordered
          %tr
            %td.success Section published
          %tr
            %td.danger Section not published
- else
  %div.container
    %div.alert.alert-warning Please select a course from the dropdown on the top right.
